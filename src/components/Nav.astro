---
import ThemeToggle from "./ThemeToggle.astro";

/** Main menu items */
const textLinks: { label: string; href: string }[] = [
  { label: "Home", href: "/" },
  { label: "Work", href: "/work/" },
  { label: "About", href: "/about/" },
];

/** Test if a link is pointing to the current page. */
const isCurrentPage = (href: string) => {
  let pathname = Astro.url.pathname.replace(import.meta.env.BASE_URL, "");
  if (pathname.at(0) !== "/") pathname = "/" + pathname;
  if (pathname.at(-1) !== "/") pathname += "/";
  return pathname === href || (href !== "/" && pathname.startsWith(href));
};
---

<nav>
  <ThemeToggle />
  <a href="/" class="site-title">Matthew Seccafien</a>
  <ul>
    {
      textLinks.map(({ label, href }) => (
        <li>
          <a
            aria-current={isCurrentPage(href) ? "page" : null}
            class="link"
            href={href}
          >
            {label}
          </a>
        </li>
      ))
    }
  </ul>
</nav>
